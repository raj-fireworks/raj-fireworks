<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<title>AJ Crackers - Customer View</title>
<style>
  body {
    font-family: sans-serif;
    padding: 20px;
    margin: 0;
  }
html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  width: 100%;
  box-sizing: border-box;
}
#customerInfo h4 {
   font-size: 28px;
    font-weight: bold;
    color: #2c3e50;
    border-bottom: 3px solid #e74c3c;
    padding-bottom: 10px;
    margin-bottom: 18px;
    margin-top: 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    letter-spacing: 1px;
}

header {
  width: 100vw;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  background-color: #d9534f;
  color: white;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}

.header-container {
  max-width: 100%;
  width: 100%;
 
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  box-sizing: border-box;
}


 /* Base styles for header */
header, footer {
  width: 100%;
  background-color: #d9534f;
  color: white;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}

/* Container inside header/footer to center content and add side padding */
.header-container, .footer-container {
  max-width: 100%;
  width: 100%; /* ✅ Prevent overflow */
  
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  box-sizing: border-box;
}


/* Left side header */
.header-left {
  max-width: 50%;
  text-align: left;
}
.header-left h1 {
  margin: 0;
  font-size: 28px;
}
.header-left .tagline {
  font-size: 14px;
  margin-top: 5px;
  color: #ffe;
}

/* Right side header */
.header-right {
  background: #fff3cd;
  border: 2px solid #ffc107;
  color: #333;
  padding: 12px 20px;
  border-radius: 10px;
  max-width: 45%;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  text-align: right;
  font-size: 16px;
  
}

/* Blink animations */
.blink-text {
  animation: blink-fast 1s infinite;
  color: #e60000;
  font-weight: bold;
}
.blink-slow {
  animation: blink-slow 2.5s infinite;
  color: #d9534f;
  font-weight: bold;
}
@keyframes blink-fast {
  50% {
    opacity: 0;
  }
}
@keyframes blink-slow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

/* Responsive styling for mobile view */
@media (max-width: 600px) {
  .header-container {
    flex-direction: column;
    align-items: flex-start;
  }

  .header-left,
  .header-right {
    max-width: 100%;
    text-align: left;
  }

  .header-right {
    margin-top: 15px;
    margin-right: 0;
    font-size: 14px;
    padding: 10px 15px;
  }

  .header-left h1 {
    font-size: 24px;
  }

  .header-left .tagline {
    font-size: 12px;
  }
}
@media (max-width: 600px) {
  /* Stack the form and buttons */
  div[style*="display:flex"][style*="align-items:flex-start"] {
    flex-direction: column !important;
    gap: 1rem !important;
  }

  #customerInfo {
    max-width: 100% !important;
    margin-right: 0 !important;
    width: 100%;
	margin-bottom: 0 !important;
  }

  /* Full width inputs */
  #customerInfo input[type="text"],
  #customerInfo input[type="tel"],
  #customerInfo textarea {
    width: 300px !important;
    max-width: 100%;
  }

  /* Table wrapper for horizontal scroll */
  .table-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Smaller table padding and font */
  th, td {
    padding: 6px 8px;
    font-size: 14px;
  }

  /* Buttons smaller */
  .button-group button {
    padding: 10px 14px;
    font-size: 14px;
  }

  /* Adjust WhatsApp button margin */
  .whatsapp-button {
    margin-left: 0 !important;
  }

  /* Make button group flex nicely */
  .button-group {
    flex-wrap: wrap;
    gap: 10px;
	margin: 0 !important;
  }
}

  /* Footer styles */
  footer {
    background-color: #f2f2f2;
    color: #444;
  }
  footer .footer-container {
    flex-direction: column;
    text-align: center;
    font-size: 14px;
    gap: 10px;
  }
  footer .safety {
    color: #d9534f;
    font-weight: bold;
    margin-top: 10px;
  }

  /* Rest of your page content */
  #customerInfo {
    margin-bottom: 20px;
    margin-top: 20px;
  }
  #customerInfo label {
    margin-right: 8px;
  }
  #customerInfo input[type="text"],
  #customerInfo input[type="tel"] {
    padding: 8px;
    margin-right: 20px;
    width: 200px;
    display: inline-block;
  }
  table {
  width: 100%;
  border-collapse: collapse;
  margin: 0 auto; /* ✅ Center safely */
  box-sizing: border-box;
}
@media (max-width: 600px) {
  table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
  }

  th, td {
    white-space: nowrap;
    padding: 6px 8px;
    font-size: 14px;
  }
}

  th, td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
  }
  th:first-child,
td:first-child {
  text-align: left;
}
  th {
    background-color: #f2f2f2;
  }
  input[type="number"] {
    width: 60px;
  }
  .total-section {
    margin: 20px;
    font-size: 18px;
    font-weight: bold;
  }
  .button-group {
    margin-top: 20px;
    margin-left: 20px;
  }
  .button-group button {
    padding: 12px 20px;
    font-size: 16px;
    margin-right: 10px;
    cursor: pointer;
    border: none;
    border-radius: 4px;
  }
  .whatsapp-button {
  background-color: #25D366;
  color: white;
  padding: 10px 16px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-left: 0; /* ✅ Prevent overflow on small screens */
}

  @media (max-width: 600px) {
  .whatsapp-button {
    margin-left: 20px;
  }
}

  .print-button {
    background-color: #007bff;
    color: white;
  }
  .footer-note {
    margin: 20px;
    color: #888;
    font-size: 14px;
  }
  .offer-days-left {
    font-size: 16px;
    margin-top: 10px;
    color: #555;
  }

  /* Collapsible category styles */
  .category-header {
    background-color: #f0f0f0;
    user-select: none;
    cursor: pointer;
    font-weight: bold;
    text-align: left;
  }
  .category-header td {
    padding-left: 15px;
    font-size: 18px;
  }
  .category-row {
    transition: all 0.3s ease;
  }
 .product-cell {
  vertical-align: top;
}

.product-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.product-image {
  width: 30px;
  height: 30px;
  object-fit: cover;

  cursor: pointer;
  transition: transform 0.2s ease;
}

.product-name {
  font-weight: 500;
  display: inline-block;
  max-width: 150px;
  word-wrap: break-word;
}
.product-image:hover {
  transform: scale(1.05);
  box-shadow: 0 0 8px rgba(0,0,0,0.2);
}
tr {
  padding: 10px 0;
}

  .thumb-image {
    width: 40px;
    height: 40px;
    object-fit: cover;
    margin-left: 10px;
    cursor: pointer;
    border-radius: 4px;
    border: 1px solid #ccc;
    transition: transform 0.2s ease;
  }

.image-modal {
  display: none;
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  justify-content: center;
  align-items: center;
  padding: 0;
  margin: 0;
  overflow: hidden;
  /* remove display:flex here */
}
#zoomedImage {
  max-width: 90vw;  /* max width 90% of viewport */
  max-height: 90vh; /* max height 90% of viewport */
  border-radius: 8px; /* optional styling */
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}


.image-modal img {
  max-width: 90vw;
  max-height: 90vh;
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: 8px;
  box-shadow: 0 0 10px #fff;
  cursor: zoom-out;
}



  .print-button {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 10px;
    font-size: 20px;
    border-radius: 6px;
    cursor: pointer;
  }

  .print-button:hover {
    background-color: #d32f2f;
  }
.form-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  padding: 0 1rem;
  box-sizing: border-box;
  width: 100%;
   background-image: url('https://cdn.pixabay.com/photo/2016/10/21/23/19/diwali-1756961_1280.jpg');
  background-repeat: no-repeat;
  background-position: right center;
  background-size: contain;
}
.disclaimer-box {
  width: 100%;	
  margin-top: 12px;
  padding: 10px 14px;
  background-color: #fff5e6;
  border-left: 5px solid #ff9900;
  color: #333;
  font-size: 0.85rem;
  line-height: 1.5;
  border-radius: 4px;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.05);
}

@media (max-width: 600px) {
  .form-container {
    flex-direction: column;
    padding: 0 10px;
  }

  .button-group {
    flex-wrap: wrap;
    justify-content: flex-start;
    gap: 10px;
    margin: 10px 0 0;
  }

  .whatsapp-button {
    margin-left: 0 !important; /* ✅ Reset */
	margin-bottom: 15px;
  }
}
/* Contact Info Bar */
.contact-info-bar {
  background-color: #2C3E50;
  color: #fff;
  padding: 10px 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 30px;
  font-size: 14px;
  font-family: Arial, sans-serif;
  flex-wrap: wrap;
  box-sizing: border-box;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}


.contact-info-bar i {
  color: yellow;
  margin-right: 8px;
}

/* Responsive for smaller screens */
@media (max-width: 600px) {
  .contact-info-bar {
    flex-direction: column;
    text-align: center;
    gap: 8px;
    padding: 10px;
  }
}

@media (max-width: 600px) {
  table thead th {
    font-size: 12px;
    padding: 6px;
  }

  table thead th:nth-child(1) { width: 120px; } /* Crackers Name */
  table thead th:nth-child(2) { width: 40px; }  /* Unit */
  table thead th:nth-child(3),
  table thead th:nth-child(4) { width: 60px; }  /* Actual & Offer Price */
  table thead th:nth-child(5) { width: 40px; }  /* Quantity */
  table thead th:nth-child(6) { width: 60px; }  /* Total */

  table {
    table-layout: auto !important;
    font-size: 12px;
  }

  td, th {
    word-break: break-word;
  }
}

</style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

</head>
<body>

<header>
  <div class="header-container" role="banner">
    <div class="header-left">
      <h1>🎇 AJ Crackers</h1>
      <p class="tagline" aria-label="Tagline">Your Trusted Firework Partner</p>
    </div>
	<!-- Contact Info Bar -->
	<div class="contact-info-bar">
	  <span><i class="fas fa-location-dot"></i> Sivakasi</span>
	  <span><i class="fas fa-phone"></i> 8296772217</span>
	  <span><i class="fas fa-envelope"></i> ajcrackers.sivakasi@gmail.com</span>
	</div>

    <!-- Disclaimer Message -->
<div class="disclaimer-box" role="note" aria-label="Legal disclaimer">
  <strong>⚠️ Important Legal Notice – Tamil Nadu High Court Order</strong><br>
  <small>
    As per the Madurai Bench of the Madras High Court (Order dated 04-09-2025) and the 2018 Supreme Court directions, 
    <strong>online sale or acceptance of firecracker orders is strictly prohibited</strong>.<br>
    This website is only for information and price reference.
  </small>
</div>

  </div>
</header>


<!-- Customer Info Inputs -->
  <div  class="form-container">
<div id="customerInfo" style="margin-top: 20px; max-width: 800px; margin-right: auto; margin-bottom: 40px;">
<h4>Customer Enquiry Form</h4>
  
  <!-- Name -->
  <div style="margin-bottom: 15px;">
    <label for="customerName">Name<span style="color: red;">*</span>:</label><br />
<input type="text" id="customerName" placeholder="Enter name" 
       onkeypress="return /[a-zA-Z\s]/.test(event.key)" />
  </div>

  <!-- Address -->
  <div style="margin-bottom: 15px;">
    <label for="customerAddress">Address<span style="color: red;">*</span>:</label><br />
    <textarea id="customerAddress" placeholder="Enter full address including area and landmark" required rows="3" style="width: 200px; padding: 8px; font-size: 14px; resize: vertical;"></textarea>
  </div>

 <!-- Pin Code and Phone (optional) -->
<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 15px;">


  <div style="flex: 1; min-width: 200px;">
    <label for="customerPhone">Phone (optional):</label><br />
   <input type="tel" id="customerPhone" placeholder="Enter phone number" 
              maxlength="10"
              onkeypress="return /[0-9]/.test(event.key) && this.value.length < 10" />

  </div>

</div>


</div>




<div class="button-group">
  <button class="whatsapp-button" onclick="sendOrderToWhatsApp()">Enquire via WhatsApp</button>
</div>

  </div>
<table id="productTable">
<thead>
  <tr>
    <th style="width:200px;">Crackers Name</th>
    <th style="width:50px;">Unit</th>
    <th style="width:70px;">Actual Price (₹)</th> <!-- NEW -->
    <th style="width:70px;">Offer Price (₹)</th>
    <th style="width:50px;">Quantity</th>
    <th style="width:70px;">Total (₹)</th>
  </tr>
</thead>

  <tbody></tbody>
</table>

<div class="total-section">
  <p>Products Total: ₹<span id="grandTotal">0.00</span></p>
  <p>Transport Charge: ₹<span id="transportCharge">850.00</span></p>
  <p><strong>Payable Total: ₹<span id="payableTotal">0.00</span></strong></p>
</div>



<div class="button-group" style="display:flex;gap:15px;">
  <button class="whatsapp-button" style="margin:0;" onclick="sendOrderToWhatsApp()">Enquire via WhatsApp</button>
   <button class="print-button" onclick="downloadPDF()" title="Download Product List PDF">
  Download Product List PDF
</button>
</div>

<p class="footer-note">* Offer is fixed and prices shown are after discount. Prices inclusive of taxes.</p>

<footer>
  <div class="footer-container">
    <p><strong>AJ Crackers</strong> — Your Trusted Firework Partner</p>
    <p>Contact: +91 82967 72217, 97914 44235, 99436 81121 | Email: support@ajcrackers.in</p>
    <p class="safety">🔥 Please celebrate responsibly and follow firework safety rules!</p>
  </div>
</footer>

<script>
function loadProducts() {
  fetch("products.json")
    .then(res => res.json())
    .then(data => {
      console.log("Loaded products:", data);

      try {
        // Optional: You can keep this if you want to get offer from localStorage
        const storedOffer = JSON.parse(localStorage.getItem("fireworkOffer")) || { offer: 75 };
        currentOffer = storedOffer.offer;
        // Remove this line if you don't have an element with id 'discountPercent'
        // document.getElementById("discountPercent").textContent = `${currentOffer}%`;

        // Convert and map products
        const products = Object.entries(data).map(([name, info]) => ({
          name,
          price: Number(info.price) || 0,
          offerprice: Number(info.offerprice) || 0,
          unit: info.unit || "-",
          category: info.category || "Uncategorized"
        }));

        renderProductTable(products);

      } catch (err) {
        console.error("❌ Error processing products:", err);
        document.querySelector("#productTable tbody").innerHTML = `<tr><td colspan="6">Failed to process products.</td></tr>`;
      }
    })
    .catch(err => {
      console.error("Error loading products.json:", err);
      document.querySelector("#productTable tbody").innerHTML = `<tr><td colspan="6">Failed to load products.</td></tr>`;
    });
}
window.onload = function () {
  loadProducts();
  // Initialize totals/transport in UI
  document.getElementById("transportCharge").textContent = TRANSPORT_CHARGE.toFixed(2);
  calculateTotals();
};

function renderProductTable(products) {
  const tbody = document.querySelector("#productTable tbody");
  tbody.innerHTML = "";

  if (!products.length) {
    tbody.innerHTML = `<tr><td colspan="6">No products available.</td></tr>`;
    return;
  }

  const categories = {};
  const normalizeCategory = cat => cat.trim();

  products.forEach(item => {
    const cat = normalizeCategory(item.category || "Uncategorized");
    if (!categories[cat]) categories[cat] = [];
    categories[cat].push(item);
  });

  Object.entries(categories).forEach(([category, items], index) => {
    const catRow = document.createElement("tr");
    catRow.classList.add("category-header");
    catRow.style.cursor = "pointer";
    catRow.innerHTML = `<td colspan="6" style="text-align:left; background:#f0f0f0; font-weight:bold;">
      ▼ ${category}
    </td>`;
    tbody.appendChild(catRow);

    items.forEach(item => {
      const row = document.createElement("tr");
      row.classList.add("category-row", `category-${index}`);

// Construct image path from product name
const safeFileName = item.name.replace(/[^a-zA-Z0-9\s]/g, "");  // Keep spaces
const imageName = safeFileName + ".jpeg";
const imagePath = `images/${encodeURIComponent(imageName)}`;


      row.innerHTML = `
        <td class="product-cell">
          <div class="product-wrapper">
            <img 
  class="product-image"
  src="${imagePath}" 
  alt="${item.name}" 
  onerror="this.style.display='none';"
  onclick="zoomImage('${imagePath}')"
/>

            <span class="product-name">${item.name}</span>
          </div>
        </td>
        <td>${item.unit || "-"}</td>
        <td>₹${item.price.toFixed(2)}</td>
        <td>₹${item.offerprice.toFixed(2)}</td>
        <td>
          <input 
            type="number" 
            min="0" 
            step="1" 
            placeholder="Qty" 
            onchange="calculateTotals()" 
            oninput="validateIntegerInput(this)" 
            data-name="${item.name}" 
            data-offer="${item.offerprice}" 
          />
        </td>
        <td class="item-total">₹0.00</td>
      `;
      tbody.appendChild(row);
    });

    // Toggle category rows
    catRow.addEventListener("click", () => {
      const catRows = document.querySelectorAll(`.category-${index}`);
      catRows.forEach(r => {
        r.style.display = r.style.display === "none" ? "" : "none";
      });
      catRow.cells[0].textContent = catRow.cells[0].textContent.startsWith("▼")
        ? catRow.cells[0].textContent.replace("▼", "▶")
        : catRow.cells[0].textContent.replace("▶", "▼");
    });
  });
}
function zoomImage(src) {
  const modal = document.getElementById("imageModal");
  const zoomedImg = document.getElementById("zoomedImage");

  zoomedImg.src = src;
  modal.style.display = "flex";
}

function closeModal(event) {
  // Close modal only if the click target is the modal background, not the image
  if (event.target.id === "imageModal") {
    event.target.style.display = "none";
  }
}


function validateIntegerInput(input) {
  const value = input.value.trim();

  // If input is empty, do nothing
  if (value === "") return;

  // If decimal or negative number is entered
  if (!/^\d+$/.test(value)) {
    alert("Only whole numbers are allowed. Please enter a valid quantity.");
    input.value = "";
    input.focus();
  }
}
const TRANSPORT_CHARGE = 850;

function buildOrderPayload(name, phone, address) {
  const rows = document.querySelectorAll("#productTable tbody tr");
  const items = [];
  let productsTotal = 0;

  rows.forEach(row => {
    const input = row.querySelector("input[type='number']");
    if (!input) return;
    const qty = parseInt(input.value);
    if (!qty || qty <= 0) return;

    const itemName = input.dataset.name;
    const offerPrice = parseFloat(input.dataset.offer) || 0;
    const itemTotal = qty * offerPrice;

    items.push({ name: itemName, qty, price: offerPrice, total: itemTotal });
    productsTotal += itemTotal;
  });

  return {
    name,
    phone,
    address,
    date: new Date().toLocaleString(),
    items,
    totals: {
      productsTotal,
      transport: TRANSPORT_CHARGE,
      payable: items.length ? (productsTotal + TRANSPORT_CHARGE) : 0
    }
  };
}

function makeSummaryLink(orderObj) {
  // base path for order.html in the SAME folder as this page
  const basePath = location.origin + location.pathname.replace(/[^/]+$/, '');
  const json = JSON.stringify(orderObj);
  // encode UTF-8 safely -> base64
  const b64 = btoa(unescape(encodeURIComponent(json)));
  return `${basePath}order.html?o=${b64}`;
}

function calculateTotals() {
  let grandTotal = 0;
  let selectedCount = 0;

  const rows = document.querySelectorAll("#productTable tbody tr");
  rows.forEach(row => {
    const input = row.querySelector("input[type='number']");
    const totalCell = row.querySelector(".item-total");

    if (input && totalCell) {
      const quantity = parseInt(input.value) || 0;
      const offerPrice = parseFloat(input.dataset.offer) || 0;
      const itemTotal = quantity * offerPrice;

      if (quantity > 0) selectedCount++;

      totalCell.textContent = `₹${itemTotal.toFixed(2)}`;
      grandTotal += itemTotal;
    }
  });

  // Update product total
  const grandTotalDisplay = document.getElementById("grandTotal");
  if (grandTotalDisplay) {
    grandTotalDisplay.textContent = `${grandTotal.toFixed(2)}`;
  }

  // Always show transport charge in UI
  const transportDisplay = document.getElementById("transportCharge");
  if (transportDisplay) {
    transportDisplay.textContent = `${TRANSPORT_CHARGE.toFixed(2)}`;
  }

  // If no items selected, payable is 0; else add transport charge
  const payable = selectedCount > 0 ? grandTotal + TRANSPORT_CHARGE : 0;

  const payableDisplay = document.getElementById("payableTotal");
  if (payableDisplay) {
    payableDisplay.textContent = `${payable.toFixed(2)}`;
  }
}


 

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(18);
  doc.text("AJ Crackers - Product List", 14, 20);

  const rows = [];
  const headers = [["S.No", "Product Name", "Offer Price (Rs.)"]]; // Added S.No column
async function sendOrderToWhatsApp() {
  const name = document.getElementById("customerName").value.trim();
  const phone = document.getElementById("customerPhone").value.trim();
  const address = document.getElementById("customerAddress").value.trim();

  if (!name || !address) {
    alert("Please fill in all required fields: Name, Address.");
    return;
  }

  const order = buildOrderPayload(name, phone, address);

  if (!order.items.length) {
    alert("Please select at least one product before sending the order.");
    return;
  }

  // Build summary link
  const summaryLink = makeSummaryLink(order);

  // Build WhatsApp message
  let i = 0;
  let message = `Hi, I'm ${name}, and I'd like to place an order:\n\n`;
  order.items.forEach(it => {
    i++;
    message += `${i}. ${it.name} × ${it.qty} = ₹${it.total.toFixed(2)}\n`;
  });

  message += `\nProducts Total: ₹${order.totals.productsTotal.toFixed(2)}`;
  message += `\nTransport Charge: ₹${order.totals.transport.toFixed(2)}`;
  message += `\n-----------------------------`;
  message += `\nPayable Total: ₹${order.totals.payable.toFixed(2)}`;

  message += `\n\n📍 Address: ${order.address}`;
  if (order.phone) message += `\n📞 Phone: ${order.phone}`;

  // 👉 Add the clickable summary link
  message += `\n\nView full summary: ${summaryLink}`;

  const encodedMessage = encodeURIComponent(message);
  const whatsappURL = `https://wa.me/918296772217?text=${encodedMessage}`;
  window.open(whatsappURL, "_blank");
}
  const productRows = document.querySelectorAll("#productTable tbody tr");

  let index = 1;
  productRows.forEach(row => {
    const input = row.querySelector("input[type='number']");
    if (!input) return;

    const name = input.dataset.name;
    const price = parseFloat(input.dataset.offer);
    rows.push([index + 1, name, "Rs." + Number(price).toFixed(2)]);
 // Add index to each row
    index++;
  });

  if (rows.length === 0) {
    alert("No products to export.");
    return;
  }

  doc.autoTable({
    startY: 30,
    head: headers,
    body: rows,
    theme: "grid",
    headStyles: { fillColor: [217, 83, 79] },
    styles: { fontSize: 12 },
  });

  doc.save("AJ_Crackers_Product_List.pdf");
}




  window.onload = function () {
    loadProducts();
  };
 
</script>
<!-- Image Zoom Modal -->
<div id="imageModal" class="image-modal" onclick="closeModal(event)">
  <img id="zoomedImage" src="" alt="Zoomed Image" onclick="event.stopPropagation()" />
</div>



</body>
</html>
